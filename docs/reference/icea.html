<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Individualized cost-effectiveness analysis — icea • hesim</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">hesim</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/cea-vignette.html">Individualized cost-effectiveness analysis</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/InnovationValueInitiative/hesim">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Individualized cost-effectiveness analysis</h1>
    </div>

    
    <p>Conduct Bayesian cost-effectiveness analysis (e.g. summarize a probabilistic 
sensitivity analysis) by subgroup.</p>
    

    <pre class="usage"><span class='fu'>icea</span>(<span class='no'>x</span>, <span class='no'>k</span>, <span class='kw'>sim</span> <span class='kw'>=</span> <span class='st'>"sim"</span>, <span class='kw'>strategy</span> <span class='kw'>=</span> <span class='st'>"strategy"</span>, <span class='kw'>grp</span> <span class='kw'>=</span> <span class='st'>"grp"</span>, <span class='kw'>e</span> <span class='kw'>=</span> <span class='st'>"e"</span>,
  <span class='kw'>c</span> <span class='kw'>=</span> <span class='st'>"c"</span>, <span class='kw'>custom_vars</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>custom_fun</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)

<span class='fu'>icea_pw</span>(<span class='no'>x</span>, <span class='no'>k</span>, <span class='no'>comparator</span>, <span class='kw'>sim</span> <span class='kw'>=</span> <span class='st'>"sim"</span>, <span class='kw'>strategy</span> <span class='kw'>=</span> <span class='st'>"strategy"</span>, <span class='kw'>grp</span> <span class='kw'>=</span> <span class='st'>"grp"</span>,
  <span class='kw'>e</span> <span class='kw'>=</span> <span class='st'>"e"</span>, <span class='kw'>c</span> <span class='kw'>=</span> <span class='st'>"c"</span>, <span class='kw'>custom_vars</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>custom_fun</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>Matrix containing information on mean costs and effectiveness for each simulation.
Should be in long form with unit of observation as the simulation and treatment strategy.
Should have the following columns (
sim = simulation number,
strategy = treatment strategy,
c = summary of cost for each simulation and treatment strategy
e = summary of clinical effectiveness for each simulation and treatment strategy)</p></td>
    </tr>
    <tr>
      <th>k</th>
      <td><p>Vector of willingness to pay values</p></td>
    </tr>
    <tr>
      <th>sim</th>
      <td><p>Name of column denoting simulation number. Default is "sim".</p></td>
    </tr>
    <tr>
      <th>strategy</th>
      <td><p>Name of column denoting treatment strategy. Default is "strategy".</p></td>
    </tr>
    <tr>
      <th>grp</th>
      <td><p>Name of column denoting subgroup. Default is "grp".</p></td>
    </tr>
    <tr>
      <th>e</th>
      <td><p>Name of column denoting clinical effectiveness. Default is "e".</p></td>
    </tr>
    <tr>
      <th>c</th>
      <td><p>Name of column denoting costs. Default is "c".</p></td>
    </tr>
    <tr>
      <th>custom_vars</th>
      <td><p>Character vector of variable names to use in creating a
custom summary table. Table will contain means and 95% credible intervals for
each variable. Can contain e and c.</p></td>
    </tr>
    <tr>
      <th>custom_fun</th>
      <td><p>Function to apply to custom_vars to make custom table. If 
<code>custom_vars</code> is not NULL and <code>custom_fun</code> is NULL, then returns the mean,
2.5% quantile, and 97.5% quantile for each variable in <code>custom_vars</code>.</p></td>
    </tr>
    <tr>
      <th>comparator</th>
      <td><p>Name of the comparator strategy in x.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>icea</code> returns a list containing four data.tables:</p><dl class='dl-horizontal'>
  <dt>summary</dt><dd><p>A data.table of the mean, 2.5% quantile, and 97.5% 
  quantile by strategy and group for clinical effectiveness and costs.</p></dd>
  <dt>mce</dt><dd><p>The probability that each strategy is the most effective treatment
  for each group for the range of specified willingness to pay values.</p></dd>
  <dt>evpi</dt><dd><p>The expected value of perfect information by group for the range
  of specified willingness to pay values.</p></dd>
   <dt>nmb</dt><dd><p>The mean, 2.5% quantile, and 97.5% quantile of (monetary) net benefits
   for the range of specified willingness to pay values.</p></dd>
</dl><p>In addition, if <code>custom_vars</code> is not NULL, <code>icea</code> returns <code>custom.table</code>, which is
 a data.table containing summary statistics for each variable in <code>custom_vars</code>
  by strategy and group.

<code>icea_pw</code> also returns a list containing four data.tables:</p><dl class='dl-horizontal'>
  <dt>summary</dt><dd><p>A data.table of the mean, 2.5% quantile, and 97.5% 
  quantile by strategy and group for clinical effectiveness and costs.</p></dd>
  <dt>delta</dt><dd><p>Incremental effectiveness and incremental cost for each simulated
  parameter set by strategy and group. Can be used to plot a cost-effectiveness plane. 
  Also returns the difference between each treatment strategy and the comparator for each 
  variable in <code>custom_vars</code> if <code>custom_vars</code> is not NULL.</p></dd>
  <dt>ceac</dt><dd><p>Values needed to plot a cost-effectiveness acceptability curve by
  group. In other words, the probability that each strategy is more cost-effective than
  the comparator for the specified willingness to pay values.</p></dd>
   <dt>inmb</dt><dd><p>The mean, 2.5% quantile, and 97.5% quantile of (monetary) 
   incremental net benefits for the range of specified willingness to pay values.</p></dd>
</dl><p>If <code>custom_vars</code> is not NULL, also returns <code>custom.table</code>, which is
 a data.table containing summary statistics for the values of each variable returned
  in <code>delta</code> by strategy and group.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># simulation output</span>
<span class='no'>nsims</span> <span class='kw'>&lt;-</span> <span class='fl'>100</span>
<span class='no'>sim</span> <span class='kw'>&lt;-</span> <span class='fu'>data.frame</span>(<span class='kw'>sim</span> <span class='kw'>=</span> <span class='fu'>rep</span>(<span class='fu'>seq</span>(<span class='no'>nsims</span>), <span class='fl'>4</span>),
               <span class='kw'>c</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fu'>rlnorm</span>(<span class='no'>nsims</span>, <span class='fl'>5</span>, <span class='fl'>.1</span>), <span class='fu'>rlnorm</span>(<span class='no'>nsims</span>, <span class='fl'>5</span>, <span class='fl'>.1</span>),
                      <span class='fu'>rlnorm</span>(<span class='no'>nsims</span>, <span class='fl'>11</span>, <span class='fl'>.1</span>), <span class='fu'>rlnorm</span>(<span class='no'>nsims</span>, <span class='fl'>11</span>, <span class='fl'>.1</span>)),
               <span class='kw'>e</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fu'>rnorm</span>(<span class='no'>nsims</span>, <span class='fl'>8</span>, <span class='fl'>.2</span>), <span class='fu'>rnorm</span>(<span class='no'>nsims</span>, <span class='fl'>8.5</span>, <span class='fl'>.1</span>),
                     <span class='fu'>rnorm</span>(<span class='no'>nsims</span>, <span class='fl'>11</span>, <span class='fl'>.6</span>), <span class='fu'>rnorm</span>(<span class='no'>nsims</span>, <span class='fl'>11.5</span>, <span class='fl'>.6</span>)),
               <span class='kw'>strategy</span> <span class='kw'>=</span> <span class='fu'>rep</span>(<span class='fu'>paste0</span>(<span class='st'>"Strategy "</span>, <span class='fu'>seq</span>(<span class='fl'>1</span>, <span class='fl'>2</span>)),
                             <span class='kw'>each</span> <span class='kw'>=</span> <span class='no'>nsims</span> * <span class='fl'>2</span>),
               <span class='kw'>grp</span> <span class='kw'>=</span> <span class='fu'>rep</span>(<span class='fu'>rep</span>(<span class='fu'>c</span>(<span class='st'>"Group 1"</span>, <span class='st'>"Group 2"</span>),
                             <span class='kw'>each</span> <span class='kw'>=</span> <span class='no'>nsims</span>), <span class='fl'>2</span>)
)

<span class='co'># icea</span>
<span class='no'>icea.dt</span> <span class='kw'>&lt;-</span> <span class='fu'>icea</span>(<span class='no'>sim</span>, <span class='kw'>k</span> <span class='kw'>=</span> <span class='fu'>seq</span>(<span class='fl'>0</span>, <span class='fl'>200000</span>, <span class='fl'>500</span>), <span class='kw'>sim</span> <span class='kw'>=</span> <span class='st'>"sim"</span>, <span class='kw'>strategy</span> <span class='kw'>=</span> <span class='st'>"strategy"</span>,
 <span class='kw'>grp</span> <span class='kw'>=</span> <span class='st'>"grp"</span>, <span class='kw'>e</span> <span class='kw'>=</span> <span class='st'>"e"</span>, <span class='kw'>c</span> <span class='kw'>=</span> <span class='st'>"c"</span>)
<span class='fu'>names</span>(<span class='no'>icea.dt</span>)</div><div class='output co'>#&gt; [1] "summary" "mce"     "evpi"    "nmb"    </div><div class='input'><span class='co'># the probability that each strategy is the most cost-effective </span>
<span class='co'># in each group with a willingness to pay of 20,000</span>
<span class='fu'>library</span>(<span class='st'>"data.table"</span>)
<span class='no'>icea.dt</span>$<span class='no'>mce</span>[<span class='no'>k</span> <span class='kw'>==</span> <span class='fl'>20000</span>]</div><div class='output co'>#&gt;        k   strategy     grp prob
#&gt; 1: 20000 Strategy 1 Group 1 0.40
#&gt; 2: 20000 Strategy 2 Group 1 0.60
#&gt; 3: 20000 Strategy 1 Group 2 0.44
#&gt; 4: 20000 Strategy 2 Group 2 0.56</div><div class='input'>
<span class='co'># icea_pw</span>
<span class='no'>icea.pw.dt</span> <span class='kw'>&lt;-</span>  <span class='fu'>icea_pw</span>(<span class='no'>sim</span>,  <span class='kw'>k</span> <span class='kw'>=</span> <span class='fu'>seq</span>(<span class='fl'>0</span>, <span class='fl'>200000</span>, <span class='fl'>500</span>), <span class='kw'>comparator</span> <span class='kw'>=</span> <span class='st'>"Strategy 1"</span>,
                      <span class='kw'>sim</span> <span class='kw'>=</span> <span class='st'>"sim"</span>, <span class='kw'>strategy</span> <span class='kw'>=</span> <span class='st'>"strategy"</span>, <span class='kw'>e</span> <span class='kw'>=</span> <span class='st'>"e"</span>, <span class='kw'>c</span> <span class='kw'>=</span> <span class='st'>"c"</span>)
<span class='fu'>names</span>(<span class='no'>icea.pw.dt</span>)</div><div class='output co'>#&gt; [1] "summary" "delta"   "ceac"    "inmb"   </div><div class='input'><span class='co'># cost-effectiveness acceptability curve</span>
<span class='fu'>library</span>(<span class='st'>"ggplot2"</span>)
<span class='kw pkg'>ggplot2</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/ggplot'>ggplot</a></span>(<span class='no'>icea.pw.dt</span>$<span class='no'>ceac</span>[<span class='no'>k</span> <span class='kw'>&lt;</span> <span class='fl'>50000</span>], <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/aes_'>aes_string</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='st'>"k"</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='st'>"prob"</span>)) +
 <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_path'>geom_line</a></span>() + <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/facet_wrap'>facet_wrap</a></span>(~<span class='no'>grp</span>) + <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/labs'>xlab</a></span>(<span class='st'>"Willingess to pay"</span>) +
 <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/labs'>ylab</a></span>(<span class='st'>"Probability Strategy 2 is more cost-effective than Strategy 1"</span>) +
 <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/theme'>theme</a></span>(<span class='kw'>legend.position</span> <span class='kw'>=</span> <span class='st'>"bottom"</span>)</div><div class='img'><img src='icea-1.png' alt='' width='700' height='432.632880098887' /></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Devin Incerti.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
